# rpi_psg_mml
MML player using Raspberry Pi with YMZ294(PSG).
Raspberry PiとYMZ294(PSG)で、MMLを使ってメロディーを流すプロジェクトです。

## とりあえず使ってみる

1) 回路

対応するRaspberry PiのGPIOピンと、YMZ294のピンを接続します。

| GPIO(BCM) | YMZ294 |
|:-:|:-:|
|17|D0|
|27|D1|
|22|D2|
|10|D3|
|9|D4|
|11|D5|
|5|D6|
|6|D7|
|18|/WR|
|18|/CS|
|24|A0|

※なお、このピンはsample-avemaria.pyをそのまま実行するためのピン配にすぎません。ソフトウェア上で自由に指定することが可能です。

2) 'sample-avemaria.py'の実行

Raspberry pi上で、以下を実行します。

```
$ git clone https://github.com/kinokorori/rpi_psg_mml.git
$ cd rpi_psg_mml
$ python ./sample-avemaria.py
```

## サポートするMML記法

サウンドの再生にMusic Macro Language(MML)文字列を使うことができます。

例)
T80O4L8CDEFGAB>C&C2.R4

### CDEFGAB

AからGは、音階に対応しています。ドレミファソラシドは、CDEFGABです。また、この文字の後ろに数字を書くことで、長さを指定できます。例えば、'C8'とすると、ドの４分音符を表します。
また、ドット(.)をつけると、付点X分音符になります。
半音の上げ下げがしたい場合、シャープは+,もしくは#を、フラットは-を音階と長さの間に記述します。

例）C+8, A-4.

### R

Rは休符を表します。その他のルールは音階と一緒です。

例) R4 ... ４分休符

例) R8. ... 付点８分休符

### &

タイです。スラーの場合は無視されます。

例) B2&B8

### T

後ろに数字をつけることで、テンポを指定します。

例）T100

### O

オクターブを指定します。

例）O4


### >

オクターブを１つ上げます。

### <

オクターブを１つ下げます。

### L

音階や休符で長さを省略した場合、このLで指定された長さが適用されます。

```
L8CD4
```

この場合、Cには長さが指定されていないので、Lの値に従い、8分音符となります。D4は直接長さが指定されているため、そのまま4分音符となります。

